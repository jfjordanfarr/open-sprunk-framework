<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sprunki Game - Creative Character & Music Studio</title>
    <link rel="stylesheet" href="styles/main.css">
    
    <!-- Fabric.js for character drawing capabilities -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
</head>
<body>
    <div id="app">
        <header id="app-header" class="modern-header">
            <div class="header-brand">
                <span class="brand-icon">ğŸ­</span>
                <h1 class="brand-title">Sprunki Creative Studio</h1>
            </div>
            <nav id="main-nav" class="main-navigation">
                <button class="nav-btn" data-mode="character" aria-label="Character Creator">
                    <span class="icon">ğŸ¨</span>
                    <span class="label">Characters</span>
                </button>
                <button class="nav-btn" data-mode="animation" aria-label="Animation Editor">
                    <span class="icon">ğŸ¬</span>
                    <span class="label">Animation</span>
                </button>
                <button class="nav-btn" data-mode="music" aria-label="Music Editor">
                    <span class="icon">ğŸµ</span>
                    <span class="label">Music</span>
                </button>
                <button class="nav-btn active" data-mode="stage" aria-label="Performance Stage">
                    <span class="icon">ğŸª</span>
                    <span class="label">Stage</span>
                </button>
            </nav>
            <div id="project-controls" class="project-controls">
                <button id="save-project" class="control-btn" aria-label="Save Project">
                    <span class="icon">ğŸ’¾</span>
                </button>
                <button id="load-project" class="control-btn" aria-label="Load Project">
                    <span class="icon">ğŸ“</span>
                </button>
                <button id="export-project" class="control-btn" aria-label="Export Project">
                    <span class="icon">ğŸ“¦</span>
                </button>
                <button id="settings" class="control-btn" aria-label="Settings">
                    <span class="icon">âš™ï¸</span>
                </button>
            </div>
            <!-- Settings Panel (hidden by default) -->
            <div id="settings-panel" class="settings-panel" style="display:none; position:fixed; top:60px; right:20px; width:240px; background:#222; color:#fff; border-radius:8px; box-shadow:0 4px 16px rgba(0,0,0,0.2); z-index:20000; padding:20px 16px 16px 16px; flex-direction:column; gap:16px;">
                <h3 style="margin:0 0 12px 0; font-size:1.1em; color:#4CAF50;">Settings</h3>
                <label style="display:flex; align-items:center; gap:8px; margin-bottom:10px;">
                    <input type="checkbox" id="toggle-developer-mode">
                    <span>Developer Mode</span>
                </label>
                <label style="display:flex; align-items:center; gap:8px; margin-bottom:10px;">
                    <input type="checkbox" id="toggle-debug-mode">
                    <span>Debug Mode</span>
                </label>
                <label style="display:flex; align-items:center; gap:8px; margin-bottom:10px;">
                    <input type="checkbox" id="toggle-console-logger">
                    <span>Show Console Logger</span>
                </label>
                <label style="display:flex; align-items:center; gap:8px; margin-bottom:10px;">
                    <input type="checkbox" id="toggle-tests-panel">
                    <span>Show Tests Panel</span>
                </label>
                <button id="close-settings-panel" style="margin-top:10px; background:#f44336; color:#fff; border:none; border-radius:4px; padding:6px 12px; cursor:pointer;">Close</button>
            </div>
        </header>
        
        <main id="app-main" class="app-main">
            <!-- Character Editor - Now opens in popup/overlay -->
            <div id="character-editor" class="editor-panel hidden">
                <div class="editor-launch">
                    <button id="launch-character-editor" class="launch-btn">
                        <span class="icon">ğŸ¨</span>
                        <span class="title">Open Character Creator</span>
                        <span class="subtitle">Create and edit Sprunki characters</span>
                    </button>
                </div>
            </div>
            
            <!-- Music Editor Panel -->
            <div id="music-editor" class="editor-panel hidden">
                <div class="coming-soon">
                    <span class="icon">ğŸµ</span>
                    <h3>Music Editor</h3>
                    <p>Beat-synchronized music composition coming soon</p>
                </div>
            </div>
            
            <!-- Animation Editor Panel -->
            <div id="animation-editor" class="editor-panel hidden">
                <div class="coming-soon">
                    <span class="icon">ğŸ¬</span>
                    <h3>Animation Editor</h3>
                    <p>Timeline-based animation authoring coming soon</p>
                </div>
            </div>
            
            <!-- Performance Stage - Main View -->
            <div id="performance-stage" class="editor-panel active">
                <div id="stage-canvas-container" class="stage-container">
                    <!-- Stage content will be rendered here -->
                </div>
            </div>
        </main>
        
        <!-- Move stage-controls outside of app-main for global fixed positioning -->
        <div id="stage-controls" class="stage-controls">
            <button class="stage-btn" id="play-pause" aria-label="Play/Pause">
                <span class="icon">â–¶ï¸</span>
            </button>
            <button class="stage-btn" id="stop" aria-label="Stop">
                <span class="icon">â¹ï¸</span>
            </button>
            <div class="stage-timeline">
                <input type="range" id="timeline-scrubber" min="0" max="100" value="0" aria-label="Timeline">
            </div>
        </div>
    </div>
    
    <script src="console-logger.js"></script>
    <script type="module" src="main.js"></script>
</body>
</html>
